Note that this file is a Work in Progress, and is not written by the primary author!


The TS stream consists of a stream of 204-byte TS packets.

Every packet contains a continuity counter which cycles 0->15 and then repeats.

Every 'n' packets, a packet containing a PCR timestamp is also present. The PCR timestamp is generated by the transmitter on the ISS and so is common across all receiver stations.

The TS Merger switches in 'segments' consisting of 'PCR packet ... ... ... PCR packet', this allows each segment to be aligned with the adjacent segments before & after, even from other receivers.

The TS Merger will attempt to score segments by the number of missing packets indicated by the continuity counter. It is known that this won't be reliable when 15 or more consecutive packets are missing. The lowest scoring segment available will then be selected to be output.

The segment is chosen by 2 index values, pointing to the station in the stations array, and the station's MX counter id (described below) in the data field, at which the segment starts.



The MX protocol used by 'tspush' to send the files to the merger server uses a 16-bit counter on network packets, allowing us to independently detect Network Packet Loss.
